{% extends 'Admin/baseAdmin.html.twig' %}

{% block title %}Administration - Accueil{% endblock %}

{% block body %}
    <h1>Administration du portfolio de {{ user.firstname | capitalize }}</h1>

    <a class="btn btn-primary" href="{{ path('app_edit_user', {'id': user.id}) }}">Editer le profil</a>
    <ul>
        {% if user.photo is not empty %}
            <img src="{{ vich_uploader_asset(user, 'photoFile') | imagine_filter('my_thumb') }}" alt="{{ user.photoFile }}">
        {% endif %}

        <li>Nom : {{ user.name | capitalize }}</li>
        <li>Prénom : {{ user.firstname | capitalize }}</li>
        <li>Email : {{ user.email }}</li>
        {% if user.phone is not empty %}
            <li>Mobile : {{ user.phone|phone_number_format('NATIONAL') }}</li>
        {% else %}
            <li>Mobile : {{ user.phone }}</li>
        {% endif %}
        <li>Date de naissance :
            {% if user.dateOfBirth is not empty %}
                {{ user.dateOfBirth | format_datetime(locale='fr',pattern="dd MMMM YYYY") }}
            {% endif %}
        </li>

        <li>Adresse : {{ user.address }}</li>
    </ul>

    <a class="btn btn-primary" href="{{ path('app_create_skills') }}">Ajouter une compétence</a>

    <table class="table">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Pourcentage</th>
                <th>Afficher</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for skill in user.skills %}
                <tr>
                    <td>{{ skill.name }}</td>
                    <td>{{ skill.percentage }}</td>
                    <td>{{ skill.display ? 'OUI' : 'NON' }}</td>
                    <td>
                        <a class="btn btn-primary btn-sm" href="{{ path('app_edit_skills', {'id': skill.id}) }}">Editer</a>
                        <a class="btn btn-danger btn-sm" href="{{ path('app_delete_skills', {'id': skill.id}) }}">Supprimer</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <a class="btn btn-primary" href="{{ path('app_create_projects') }}">Ajouter un projet</a>

    {% if user.projects is not empty %}
        <div class="row row-cols-3 row-cols-md-4 g-5">
            {% for project in user.projects %}
                <div class="col">
                    <div class="card text-center h-100">
                        {% if project.picture is not empty %}
                            <img src="{{ vich_uploader_asset(project, 'pictureFile') | imagine_filter('my_thumb') }}" alt="{{ project.pictureFile }}" class="card-img-top">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ project.name }}</h5>
                            <p class="card-text">{{ project.description }}</p>
                        </div>
                        <div class="card-footer">
                            <a class="btn btn-primary btn-sm" href="{{ path('app_edit_projects', {'id': project.id}) }}">Editer</a>
                            <a class="btn btn-danger btn-sm" href="{{ path('app_delete_projects', {'id': project.id}) }}">Supprimer</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <a class="btn btn-primary" href="{{ path('app_create_quotes') }}">Ajouter une citation</a>

    {% if user.quotes is not empty %}
        <div class="row row-cols-3 row-cols-md-4 g-5">
            {% for quote in user.quotes %}
                <div class="col">
                    <div class="card text-center h-100">
                        <div class="card-body">
                            <blockquote class="blockquote mb-0">
                                <p>{{ quote.content }}</p>
                                <footer class="blockquote-footer">{{ quote.author }}</footer>
                            </blockquote>
                        </div>
                        <div class="card-footer">
                            <a class="btn btn-primary btn-sm" href="{{ path('app_edit_quotes', {'id': quote.id}) }}">Editer</a>
                            <a class="btn btn-danger btn-sm" href="{{ path('app_delete_quotes', {'id': quote.id}) }}">Supprimer</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

{% endblock %}
